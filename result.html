<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OOOsã®çµæœç™ºè¡¨</title>
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: 'M PLUS Rounded 1c', sans-serif; max-width: 800px; margin: auto; padding: 20px; background-color: #f9f9f9; text-align: center; color: #333; }
    .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    h1 { color: #26466d; margin-bottom: 20px; }
    h2 { color: #26466d; border-bottom: 2px solid #26466d; padding-bottom: 10px; margin-top: 40px; margin-bottom: 20px; text-align: left; }
    
    /* å¾—ç‚¹è¡¨ç¤ºã‚¨ãƒªã‚¢ */
    .score-container { margin-bottom: 20px; }
    .total-score { font-size: 1.4em; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
    .total-val { font-size: 1.8em; color: #26466d; }
    
    .sub-scores { display: flex; justify-content: space-around; background: #f8f9fa; padding: 15px; border-radius: 8px; font-size: 0.9em; }
    .sub-item strong { display: block; color: #26466d; font-size: 1.1em; margin-bottom: 5px; }
    
    /* ãƒãƒ£ãƒ¼ãƒˆã‚¨ãƒªã‚¢ */
    .chart-container { 
      position: relative; 
      width: 100%; 
      height: 400px; 
      margin: 20px auto; 
    }
    
    /* å›ç­”ä¸€è¦§ãƒªã‚¹ãƒˆ */
    .answer-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.9em; text-align: left; }
    .answer-table th { background: #26466d; color: white; padding: 10px; text-align: center; }
    .answer-table td { border-bottom: 1px solid #ddd; padding: 10px; }
    .answer-table tr:nth-child(even) { background-color: #f9f9f9; }
    .ans-num { font-weight: bold; color: #26466d; text-align: center; width: 50px; }
    .ans-val { font-weight: bold; font-size: 1.1em; text-align: center; width: 60px; }
    
    /* ãƒ©ãƒ³ã‚¯åˆ¤å®šãƒœãƒƒã‚¯ã‚¹ */
    .rank-box { background: #fff8e1; border: 3px dashed #ffa000; padding: 20px; margin: 30px 0; border-radius: 10px; }
    .rank-title { font-weight: bold; display: block; margin-bottom: 10px; font-size: 1.1em; }
    
    .btn { display: inline-block; background: #26466d; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; transition: 0.3s; font-weight: bold; margin-top: 20px; }
    .btn:hover { background: #1e3755; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
  </style>
</head>
<body>

<div class="card">
  <h1>è¨ºæ–­çµæœ</h1>

  <div class="score-container">
    <div class="total-score">
      åˆè¨ˆå¾—ç‚¹: <span class="total-val" id="totalScore">0</span> <span style="font-size:0.7em; color:#888;">/ 150</span>
    </div>
    <div class="sub-scores">
      <div class="sub-item"><strong>OCP</strong><span id="ocpVal">0</span> / 48</div>
      <div class="sub-item"><strong>OFP</strong><span id="ofpVal">0</span> / 48</div>
      <div class="sub-item"><strong>OBP</strong><span id="obpVal">0</span> / 54</div>
    </div>
  </div>

  <div class="chart-container">
    <canvas id="oooChart"></canvas>
  </div>
  
  <div class="rank-box">
    <span class="rank-title">ã‚ãªãŸã®æ½œåœ¨ãƒ©ãƒ³ã‚¯åˆ¤å®š</span>
    <span style="font-size: 1.8em; color: #e67e22; font-weight:bold;">ğŸ› ï¸ ã„ã¾æ§‹ç¯‰ä¸­</span>
    <p style="font-size: 0.85em; color: #666; margin-top: 10px;">
      â€»ç¾åœ¨ã€å¤šãã®ãƒ‡ãƒ¼ã‚¿ã‚’é›†ã‚ã¦æ¨å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚
    </p>
  </div>

  <h2>ã‚ãªãŸã®å›ç­”ä¸€è¦§</h2>
  <table class="answer-table">
    <thead>
      <tr>
        <th>No.</th>
        <th>è³ªå•é …ç›®</th>
        <th>å›ç­”</th>
      </tr>
    </thead>
    <tbody id="answer-list-body">
      </tbody>
  </table>

  <a href="index.html" class="btn">ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹</a>
</div>

<script>
  // ä¿å­˜ã•ã‚ŒãŸçµæœã‚’å–å¾—
  const res = JSON.parse(sessionStorage.getItem('ooo_result'));

  if (!res) {
    alert("ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚");
    location.href = 'index.html';
  }

  // --- å¾—ç‚¹è¡¨ç¤º ---
  document.getElementById('totalScore').innerText = res.total_score;
  document.getElementById('ocpVal').innerText = res.ocp_score;
  document.getElementById('ofpVal').innerText = res.ofp_score;
  document.getElementById('obpVal').innerText = res.obp_score;

  // --- ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ ---
  const ocpRate = (res.ocp_score / 48) * 100;
  const ofpRate = (res.ofp_score / 48) * 100;
  const obpRate = (res.obp_score / 54) * 100;

  const ctx = document.getElementById('oooChart').getContext('2d');
  new Chart(ctx, {
    type: 'radar',
    data: {
      labels: ['OCP (ä½œæ¥­ä¸­å¿ƒ)', 'OFP (ä½œæ¥­ç„¦ç‚¹)', 'OBP (ä½œæ¥­åŸºç›¤)'],
      datasets: [{
        label: 'ã‚¹ã‚³ã‚¢',
        data: [ocpRate, ofpRate, obpRate],
        backgroundColor: 'rgba(38, 70, 109, 0.2)',
        borderColor: '#26466d',
        borderWidth: 3,
        pointBackgroundColor: '#fff',
        pointBorderColor: '#26466d',
        pointRadius: 5
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        r: {
          suggestedMin: 0,
          suggestedMax: 100,
          ticks: { display: false }, /* 100åˆ†ã®è¨˜è¼‰ã‚’æ¶ˆã™ */
          pointLabels: {
            font: { size: 14, weight: 'bold', family: "'M PLUS Rounded 1c', sans-serif" },
            color: '#26466d'
          }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: { enabled: false } /* ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã«æ¶ˆã™ */
      }
    }
  });

  // --- å›ç­”ä¸€è¦§ã®ç”Ÿæˆ ---
  // è³ªå•æ–‡ãƒ‡ãƒ¼ã‚¿ï¼ˆindex.htmlã¨åŒã˜ã‚‚ã®ï¼‰
  const oooQuestions = [
    { id: 1, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆãŒç”Ÿãã‚‹ã†ãˆã§ã€ä½œæ¥­ãŒãªãœå¿…è¦ã‹èª¬æ˜ã§ãã‚‹" },
    { id: 2, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®å¥åº·ãƒ»å¹¸ç¦ã®ãŸã‚ã«ã€ä½œæ¥­ãŒãªãœå¿…è¦ã‹èª¬æ˜ã§ãã‚‹" },
    { id: 3, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã«ã¨ã£ã¦ã€ä½œæ¥­ã®æ„å‘³ã‚„ä¾¡å€¤ã®é‡è¦æ€§ã‚’è§£é‡ˆã§ãã‚‹" },
    { id: 4, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®ä½œæ¥­ã«é–¢ã™ã‚‹ç‰©ç†çš„ãƒ»ç¤¾ä¼šçš„ç’°å¢ƒã®å´é¢ã‚’èªè­˜ã§ãã‚‹" },
    { id: 5, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®ä½œæ¥­ãŒã€æ–‡åŒ–çš„èƒŒæ™¯ã‚„ç¤¾ä¼šçš„è¦ç¯„ã«ã‚ˆã£ã¦ã©ã®ã‚ˆã†ã«å½¢ä½œã‚‰ã‚Œã¦ã„ã‚‹ã‹ç†è§£ã§ãã‚‹" },
    { id: 6, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®ä½œæ¥­ã®éå»ãƒ»ç¾åœ¨ãƒ»æœªæ¥ã®é€£ç¶šæ€§ã‚’è§£é‡ˆã§ãã‚‹" },
    { id: 7, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®ä½œæ¥­ã«é–¢ã™ã‚‹èª²é¡Œã«å¯¾ã—ã€ä½œæ¥­ã®è¦–ç‚¹ã‚’ä¸»è»¸ã«æ®ãˆã€å¤šæ§˜ãªãƒªãƒ¼ã‚ºãƒ‹ãƒ³ã‚°ã‚’ä½¿ã„åˆ†ã‘ã¦æ–¹é‡ã‚’æ±ºå®šã§ãã‚‹" },
    { id: 8, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆãŒç›´é¢ã™ã‚‹èª²é¡Œã‚’ã€èº«ä½“æ©Ÿèƒ½ã‚„ç²¾ç¥æ©Ÿèƒ½ã ã‘ã§ãªãã€ä½œæ¥­ã¨ã®é–¢é€£ã§æ‰ãˆã‚‹ã“ã¨ãŒã§ãã‚‹" },
    { id: 9, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã«ã¨ã£ã¦æ„å‘³ã®ã‚ã‚‹ä½œæ¥­ã‚’ç‰¹å®šã§ãã‚‹" },
    { id: 10, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®ä½œæ¥­ã«å¯¾ã™ã‚‹ä¸»è¦³çš„ãªçµŒé¨“ï¼ˆé‡è¦åº¦ã€å®Ÿè¡Œåº¦ãªã©ï¼‰ã‚’è©•ä¾¡ã§ãã‚‹" },
    { id: 11, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®ç¾åœ¨ã®å½¹å‰²ã‚„ç¿’æ…£ãŒä½œæ¥­ã«ä¸ãˆã‚‹å½±éŸ¿ã‚’è©•ä¾¡ã—ã€ä»‹å…¥è¨ˆç”»ã‚’ç«‹æ¡ˆã§ãã‚‹" },
    { id: 12, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®ç¾åœ¨ã®ä½œæ¥­ã«é–¢ã™ã‚‹èª²é¡Œã‚’æ˜ç¢ºã«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹" },
    { id: 13, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã¨å”åƒã—ã€ä½œæ¥­ã«é–¢ã™ã‚‹ç›®æ¨™ã‚’è¨­å®šã§ãã‚‹" },
    { id: 14, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®ä½œæ¥­ã«é–¢ã™ã‚‹ç›®æ¨™ã«å¯¾ã—ã€é”æˆåº¦ã‚’ç¶™ç¶šçš„ã«è©•ä¾¡ã™ã‚‹ã“ã¨ãŒã§ãã‚‹" },
    { id: 15, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã«ä½œæ¥­ã®æ„å‘³ã‚„ä¾¡å€¤ã¸ã®æ°—ã¥ãã‚’ä¿ƒã™ã“ã¨ãŒã§ãã‚‹" },
    { id: 16, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®ä½œæ¥­ã¸ã®å‚åŠ ã‚’ä¿ƒé€²ã™ã‚‹ãŸã‚ã€å‘¨å›²ã®ç†è§£ã‚’æ·±ã‚ã€æ”¯æ´çš„ãªç’°å¢ƒã‚’æ•´ãˆã‚‹ã“ã¨ãŒã§ãã‚‹" },
    { id: 17, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆãŒå®Ÿéš›ã«è¡Œã†ä½œæ¥­ã®è³ªã‚’ã€è¦³å¯Ÿè©•ä¾¡ã§ãã‚‹" },
    { id: 18, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆãŒå®Ÿéš›ã«è¡Œã†ä½œæ¥­ã‚’è¦³å¯Ÿã—ã€äººãƒ»ç’°å¢ƒãƒ»ä½œæ¥­ã®ç›¸äº’é–¢ä¿‚ã‚’åˆ†æã§ãã‚‹" },
    { id: 19, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã«åˆã†ä½œæ¥­ã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã€å®Ÿéš›ã®ä½œæ¥­ã‚’è©¦ã™ã“ã¨ãŒã§ãã‚‹" },
    { id: 20, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®ä½œæ¥­ã«é–¢ã™ã‚‹èª²é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã€ä½œæ¥­ã®é›£æ˜“åº¦ã‚’æ®µéšã¥ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹" },
    { id: 21, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆãŒå®Ÿéš›ã®ä½œæ¥­ã‚’è¡Œã†éç¨‹ã§ã€æ‰‹æœ¬ãƒ»ä»‹åŠ©ãƒ»åŠ©è¨€ã‚„å•ã„ã‹ã‘ã‚’ä½¿ã„åˆ†ã‘ã€æœ€é©ãªã‚„ã‚Šæ–¹ã®ç¿’å¾—ã‚’æ”¯æ´ã§ãã‚‹" },
    { id: 22, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆãŒå®Ÿéš›ã«ä½œæ¥­ã«å–ã‚Šçµ„ã‚€ã“ã¨ã‚’é€šã—ã¦ã€è‡ªå·±èªè­˜ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚„æˆé•·ã®å®Ÿæ„Ÿï¼‰ã®æ§‹ç¯‰ã‚’æ”¯æ´ã§ãã‚‹" },
    { id: 23, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆãŒå±…å ´æ‰€ã‚’æ‰‹ã«ã„ã‚Œã‚‹ãŸã‚ã€å®Ÿéš›ã«ä½œæ¥­ã«å–ã‚Šçµ„ã‚€ã“ã¨ã‚’é€šã—ã¦æ”¯æ´ã§ãã‚‹" },
    { id: 24, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®èª²é¡Œè§£æ±ºã®ãŸã‚ã«ã€ãªã˜ã¿ã®ã‚ã‚‹å®Ÿéš›ã®ç”Ÿæ´»ç’°å¢ƒã§ç›´æ¥ä½œæ¥­ã‚’ç”¨ã„ãŸä»‹å…¥ãŒã§ãã‚‹" },
    { id: 25, text: "ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®ãªã˜ã¿ã®ã‚ã‚‹ç”Ÿæ´»ç’°å¢ƒã§ä»‹å…¥ãŒå›°é›£ãªå ´åˆã€å¯èƒ½ãªé™ã‚Šé¡ä¼¼ã—ãŸç’°å¢ƒã§ç›´æ¥ä½œæ¥­ã‚’ç”¨ã„ãŸä»‹å…¥ãŒã§ãã‚‹" }
  ];

  const tbody = document.getElementById('answer-list-body');
  oooQuestions.forEach(q => {
    const tr = document.createElement('tr');
    // sessionStorageã«ä¿å­˜ã•ã‚ŒãŸå›ç­”ãƒ‡ãƒ¼ã‚¿(q1, q2...)ã‚’å–å¾—
    const val = res.responses['q' + q.id];
    
    tr.innerHTML = `
      <td class="ans-num">${q.id}</td>
      <td>${q.text}</td>
      <td class="ans-val">${val}</td>
    `;
    tbody.appendChild(tr);
  });

</script>

</body>
</html>
